<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Crypto Trading Dashboard</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0f0f23;
      color: white;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #1a1a2e;
      padding: 20px;
      text-align: center;
    }
    .container {
      max-width: 1400px;
      margin: 0 auto;
      padding: 20px;
    }
    .section {
      background-color: #1a1a2e;
      margin-bottom: 20px;
      padding: 20px;
      border-radius: 10px;
    }
    .section h2 {
      color: #f39c12;
      border-bottom: 1px solid #f39c12;
      padding-bottom: 10px;
    }
    .refresh-btn {
      background-color: #3498db;
      color: white;
      border: none;
      padding: 10px 20px;
      border-radius: 5px;
      cursor: pointer;
      font-weight: bold;
      margin-top: 10px;
    }
  </style>
</head>
<body>
  <header>
    <h1>üöÄ Crypto Trading Dashboard</h1>
    <div id="lastUpdated">Last updated: --</div>
    <button class="refresh-btn" onclick="loadAllData()">üîÑ Refresh Data</button>
  </header>

  <div class="container">
    <div class="section" id="portfolioSection">
      <h2>üíº Your Portfolio</h2>
      <div id="portfolioTracker">Loading portfolio...</div>
    </div>

    <div class="section" id="marketOverviewSection">
      <h2>üìä Market Overview</h2>
      <div id="marketOverview">Loading market data...</div>
    </div>

    <div class="section" id="btcDominanceSection">
      <h2>üëë BTC Dominance</h2>
      <div id="btcDominance">Loading BTC dominance...</div>
    </div>

    <div class="section" id="technicalAnalysisSection">
      <h2>üìà BTC Technical Analysis</h2>
      <div id="technicalAnalysis">RSI: 51.23 (Neutral), MACD: 0.87 (Bullish), SMA20: $42,500</div>
    </div>

    <div class="section" id="newsSection">
      <h2>üì∞ Latest Crypto News</h2>
      <div id="cryptoNews">Loading news...</div>
    </div>

    <div class="section" id="whaleAlertsSection">
      <h2>üêã Whale Activity</h2>
      <div id="whaleAlerts">Monitoring whale movements...</div>
    </div>

    <div class="section" id="fearGreedSection">
      <h2>üò± Fear & Greed Index</h2>
      <div id="fearGreedIndex">Loading sentiment data...</div>
    </div>
  </div>

  <script>
    async function loadAllData() {
      document.getElementById('lastUpdated').textContent = `Last updated: ${new Date().toLocaleString()}`;
      await Promise.all([
        loadPortfolio(),
        loadMarketData(),
        loadBTCDominance(),
        loadNews(),
        loadWhaleAlerts(),
        loadFearGreedIndex()
      ]);
    }

    async function loadPortfolio() {
      try {
        const portfolio = [
          { id: 'bitcoin', symbol: 'BTC', qty: 0.5, entry: 30000 },
          { id: 'ethereum', symbol: 'ETH', qty: 2, entry: 2000 }
        ];
        const ids = portfolio.map(p => p.id).join(',');
        const res = await fetch(`https://api.coingecko.com/api/v3/simple/price?ids=${ids}&vs_currencies=usd`);
        const prices = await res.json();

        let html = '';
        portfolio.forEach(p => {
          const price = prices[p.id]?.usd || 0;
          const value = p.qty * price;
          const pnl = (price - p.entry) * p.qty;
          html += `<div>${p.symbol}: ${p.qty} √ó $${price.toFixed(2)} = $${value.toFixed(2)} (P&L: <b style="color:${pnl >= 0 ? 'lime' : 'red'}">$${pnl.toFixed(2)}</b>)</div>`;
        });

        document.getElementById('portfolioTracker').innerHTML = html;
      } catch (e) {
        document.getElementById('portfolioTracker').innerText = 'Failed to load portfolio data.';
      }
    }

    async function loadMarketData() {
      try {
        const response = await fetch('https://api.coingecko.com/api/v3/simple/price?ids=bitcoin,ethereum&vs_currencies=usd&include_24hr_change=true');
        const data = await response.json();
        let html = '';
        for (const key in data) {
          const coin = data[key];
          html += `<div>${key.toUpperCase()}: $${coin.usd} (${coin.usd_24h_change.toFixed(2)}%)</div>`;
        }
        document.getElementById('marketOverview').innerHTML = html;
      } catch (e) {
        document.getElementById('marketOverview').innerText = 'Market data unavailable.';
      }
    }

    async function loadBTCDominance() {
      try {
        const response = await fetch('https://api.coingecko.com/api/v3/global');
        const data = await response.json();
        const btcDom = data.data.market_cap_percentage.btc;
        document.getElementById('btcDominance').innerText = `BTC Dominance: ${btcDom.toFixed(2)}%`;
      } catch (e) {
        document.getElementById('btcDominance').innerText = 'Dominance data unavailable.';
      }
    }

    async function loadNews() {
      // Mock data (replace with real API when you have one)
      const headlines = [
        "üî∏ Bitcoin ETF inflows hit $200M in a single day.",
        "üîπ Ethereum upgrade expected in Q4 2025.",
        "üìâ Market correction wipes $50B in crypto value.",
        "üöÄ Solana network processes 100M transactions/day.",
        "üí∞ Binance launches new P2P rewards program."
      ];
      let html = '';
      headlines.forEach(headline => {
        html += `<div>${headline}</div>`;
      });
      document.getElementById('cryptoNews').innerHTML = html;
    }

    async function loadWhaleAlerts() {
      // Mock data (replace with real Whale Alert API later)
      const alerts = [
        "üê≥ 1,200 BTC moved to Coinbase ‚Äì 1h ago",
        "üêã 850 ETH withdrawn from Binance ‚Äì 2h ago",
        "üê≥ 5M USDT transferred to unknown wallet ‚Äì 3h ago"
      ];
      let html = '';
      alerts.forEach(alert => {
        html += `<div>${alert}</div>`;
      });
      document.getElementById('whaleAlerts').innerHTML = html;
    }

    async function loadFearGreedIndex() {
      try {
        const response = await fetch('https://api.alternative.me/fng/');
        const data = await response.json();
        const index = data.data[0];
        document.getElementById('fearGreedIndex').innerText = `Index: ${index.value} (${index.value_classification})`;
      } catch (e) {
        document.getElementById('fearGreedIndex').innerText = 'Sentiment data unavailable.';
      }
    }

    // Load all on first render
    loadAllData();
  </script>
</body>
</html>
